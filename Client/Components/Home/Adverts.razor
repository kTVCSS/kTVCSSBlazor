@using kTVCSS.Models.Db.Models.Common
@using kTVCSSBlazor.Client.Authorization
@using kTVCSSBlazor.Client.Services
@inject HttpClient http
@inject NavigationManager nm
@inject StateProvider AuthProvider
@inject IMobileDetectionService mds

@if (ready)
{
    if (!isMobile)
    {
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.Center"
            class="rz-w-100">
            @foreach (var adv in adverts)
            {
                <RadzenLink Target="_blank" Path="@adv.Link">
                    @((MarkupString)adv.Html)
                </RadzenLink>
                <CascadingAuthenticationState>
                    <AuthorizeView>
                        <Authorized>
                            @if (AuthProvider.CurrentUser.Role >= kTVCSS.Models.Db.Models.Roles.RoleType.Admin) {
                                <RadzenButton Variant="Variant.Text" Text="Удалить" Click="@(() => { Remove(adv.Id); })" />
                            }
                        </Authorized>
                    </AuthorizeView>
                </CascadingAuthenticationState>
            }
        </RadzenStack>
    }
    else
    {
        <RadzenStack Orientation="Orientation.Vertical" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.Center"
            class="rz-w-100">
            @foreach (var adv in adverts)
            {
                <RadzenLink Target="_blank" Path="@adv.Link">
                    @((MarkupString)adv.Html)
                </RadzenLink>
                <CascadingAuthenticationState>
                    <AuthorizeView>
                        <Authorized>
                            @if (AuthProvider.CurrentUser.Role >= kTVCSS.Models.Db.Models.Roles.RoleType.Admin) {
                                <RadzenButton Variant="Variant.Text" Text="Удалить" Click="@(() => { Remove(adv.Id); })" />
                            }
                        </Authorized>
                    </AuthorizeView>
                </CascadingAuthenticationState>
            }
        </RadzenStack>
    }
}